<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="sidebar">
	<button id="toggle-sidebar" onclick="toggleSidebar()">‚ò∞</button>
        <button id="chat-button" onclick="showSection('chat-container')">üí¨ Chat</button>
        <button id="logs-button" onclick="showSection('logs-container')">üìú Logs</button>
        <button id="settings-button" onclick="showSection('settings-container')">‚öôÔ∏è Settings</button>
    </div>

    <div id="main-content">
        <!-- Chat Section -->
        <div id="chat-container" class="section">
            <h2>AI Chat</h2>
            <div id="chat-box"></div>
            <div class="input-container">
                <input id="chat-input" type="text" placeholder="Type a message..." onkeypress="handleKeyPress(event)" />
                <button onclick="sendMessage()">‚û§</button>
                <button id="mic-button">üé§</button>
            </div>
        </div>

        <!-- Logs Section -->
        <div id="logs-container" class="section" style="display: none;">
            <h2>Logs</h2>
            <div id="logs-box"></div>
            <button onclick="fetchLogs()">üîÑ Refresh Logs</button>
        </div>

        <!-- Settings Section -->
        <div id="settings-container" class="section" style="display: none;">
            <h2>Settings</h2>
            <div class="toggle-container">
                <span class="toggle-label">Enable AI Speech</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="speech-toggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </div>

    <!-- AI Orb Animation with Visualizer -->
    <div id="ai-orb-container">
        <div class="ai-orb" id="ai-orb">
            <div id="visualizer"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        async function fetchLogs() {
            const response = await fetch('/logs');
            const logsText = await response.text();
            const logsBox = document.getElementById('logs-box');
            logsBox.innerHTML = '';
            logsText.split('\n').forEach(line => {
                if (line.trim() !== '') {
                    const div = document.createElement('div');
                    div.className = 'log-entry';
                    div.textContent = line;
                    logsBox.appendChild(div);
                }
            });
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
            document.getElementById(sectionId).style.display = 'flex';

            if (sectionId === 'logs-container') {
                fetchLogs();
            }
        }
    </script>
</body>
</html>
